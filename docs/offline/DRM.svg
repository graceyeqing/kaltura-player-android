<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="556px" preserveAspectRatio="none" style="width:503px;height:556px;" version="1.1" viewBox="0 0 503 556" width="503px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rnp86q3um5ta" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="31" x2="31" y1="38.4883" y2="515.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="370" x2="370" y1="38.4883" y2="515.5254"/><rect fill="#E0FFFF" filter="url(#f1rnp86q3um5ta)" height="30.4883" rx="7" ry="7" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="15" y="23.5352">App</text><rect fill="#E0FFFF" filter="url(#f1rnp86q3um5ta)" height="30.4883" rx="7" ry="7" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="8" y="514.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="15" y="535.0605">App</text><rect fill="#FEFECE" filter="url(#f1rnp86q3um5ta)" height="30.4883" rx="7" ry="7" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="308" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="315" y="23.5352">OfflineManager</text><rect fill="#FEFECE" filter="url(#f1rnp86q3um5ta)" height="30.4883" rx="7" ry="7" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="308" y="514.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="315" y="535.0605">OfflineManager</text><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="488" x="3" y="69.1436"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="69.1436" y2="69.1436"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="72.1436" y2="72.1436"/><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="223" x="135.5" y="58.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205" x="141.5" y="75.0566">Install (part of Download Flow)</text><polygon fill="#A80036" points="42,108.7988,32,112.7988,42,116.7988,38,112.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36" x2="369" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="48" y="108.3672">onLicenseInstall(entryId, totalTime, timeToRenew)</text><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="488" x="3" y="141.7646"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="141.7646" y2="141.7646"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="144.7646" y2="144.7646"/><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="104" x="195" y="131.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="201" y="147.6777">Check status</text><polygon fill="#A80036" points="358,181.4199,368,185.4199,358,189.4199,362,185.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="364" y1="185.4199" y2="185.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="38" y="180.9883">getDrmStatus(entryId)</text><polygon fill="#A80036" points="42,210.7305,32,214.7305,42,218.7305,38,214.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36" x2="369" y1="214.7305" y2="214.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="48" y="210.2988">assetDrmStatus</text><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="488" x="3" y="243.6963"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="243.6963" y2="243.6963"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="246.6963" y2="246.6963"/><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="63" x="215.5" y="233.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="221.5" y="249.6094">Renew</text><polygon fill="#A80036" points="358,283.3516,368,287.3516,358,291.3516,362,287.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="364" y1="287.3516" y2="287.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="38" y="282.9199">renewAssetDrmLicense(entryId)</text><path d="M263,307.6621 L263,318.6621 A7,7 0 0 0 270,325.6621 L466,325.6621 A7,7 0 0 0 473,318.6621 L473,310.6621 L463,300.6621 L270,300.6621 A7,7 0 0 0 263,307.6621 " fill="#FFFF00" filter="url(#f1rnp86q3um5ta)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M463,300.6621 L463,307.1621 A3.5,3.5 0 0 0 466.5,310.6621 L473,310.6621 L463,300.6621 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="269" y="318.2305">Contact Kaltura API and uDRM</text><polygon fill="#A80036" points="42,351.9727,32,355.9727,42,359.9727,38,355.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36" x2="369" y1="355.9727" y2="355.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="315" x="48" y="351.541">onLicenseRenew(entryId, totalTime, timeToRenew)</text><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="488" x="3" y="384.9385"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="384.9385" y2="384.9385"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="491" y1="387.9385" y2="387.9385"/><rect fill="#EEEEEE" filter="url(#f1rnp86q3um5ta)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="72" x="211" y="374.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="217" y="390.8516">Remove</text><polygon fill="#A80036" points="358,424.5938,368,428.5938,358,432.5938,362,428.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="364" y1="428.5938" y2="428.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="38" y="424.1621">removeAsset(entryId)</text><path d="M253,448.9043 L253,459.9043 A7,7 0 0 0 260,466.9043 L475,466.9043 A7,7 0 0 0 482,459.9043 L482,451.9043 L472,441.9043 L260,441.9043 A7,7 0 0 0 253,448.9043 " fill="#FFFF00" filter="url(#f1rnp86q3um5ta)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M472,441.9043 L472,448.4043 A3.5,3.5 0 0 0 475.5,451.9043 L482,451.9043 L472,441.9043 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="259" y="459.4727">this also removes the asset itself</text><polygon fill="#A80036" points="42,493.2148,32,497.2148,42,501.2148,38,497.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36" x2="369" y1="497.2148" y2="497.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="48" y="492.7832">onLicenseRemove</text><!--
@startuml DRM

skinparam backgroundColor transparent
skinparam roundCorner 14
skinparam NoteBackgroundColor #ffff00

participant App #lightcyan
participant OfflineManager as Offline

== Install (part of Download Flow) ==
Offline->App: onLicenseInstall(entryId, totalTime, timeToRenew)

== Check status ==
App->Offline: getDrmStatus(entryId)
return assetDrmStatus

== Renew ==
App->Offline: renewAssetDrmLicense(entryId)
note over Offline: Contact Kaltura API and uDRM
Offline->App: onLicenseRenew(entryId, totalTime, timeToRenew)

== Remove ==
App->Offline: removeAsset(entryId)
note over Offline: this also removes the asset itself
Offline->App: onLicenseRemove

@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 IST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-915-b08
Operating System: Mac OS X
OS Version: 10.13.3
Default Encoding: US-ASCII
Language: en
Country: IL
--></g></svg>